<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finding a Job</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css"> <!-- Link to the external CSS file -->
</head>
<body>
    <div class="header">Zoran Ventures</div>
    <div class="container">
        <div class="content-box">
            <div class="content">
                <p>Finding a job is hard. I know. We're here to help.</p>
                <p><strong>Your personal sales team</strong>, at your service.</p>
                <p>Soon.</p>
                <div class="email-form">
                    <form id="email-form">
                        <input type="email" name="email" placeholder="Enter your email" required>
                        <input type="hidden" name="salesperson" id="salesperson">
                        <button type="submit" id="submit-button">Join Waitlist</button>
                    </form>
                    <p id="success-message" class="success-message">Thrilled to have you on board! We will email you when we launch.</p>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Function to get the query parameter value
        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (pair[0] == variable) {
                    return pair[1];
                }
            }
            return false;
        }

        // Set the salesperson ID from the URL parameter to the hidden input field
        window.onload = function() {
            var salesperson = getQueryVariable("salesperson");
            if (salesperson) {
                document.getElementById("salesperson").value = salesperson;
            }
        }

        // Handle form submission
        document.getElementById('email-form').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the default form submission
            
            const formData = new FormData(this);
            const email = formData.get('email');
            const salesperson = formData.get('salesperson');
            
            // Construct the URL for the Google Form submission
            const googleFormUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSfnU1CGPeGp7vXtdqfC1wDF9lZbRAI77X_kq2hvg3DLWr5YdA/formResponse';
            const params = new URLSearchParams();
            params.append('entry.42365981', email); // Replace 'entry.1412110087' with the entry ID for the email question
            params.append('entry.873301040', salesperson); // Replace 'entry.XXXXXX' with the entry ID for the salesperson question

            // Send the request to the Google Form
            fetch(`${googleFormUrl}?${params.toString()}`, {
                method: 'POST',
                mode: 'no-cors'
            }).then(() => {
                // Replace the form with the success message
                document.getElementById('email-form').style.display = 'none';
                document.getElementById('success-message').style.display = 'block';
            }).catch((error) => {
                console.error('Error submitting the form:', error);
            });
        });
    </script>
</body>
</html>
